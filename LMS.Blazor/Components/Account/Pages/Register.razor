@page "/Account/Register"

@using System.ComponentModel.DataAnnotations
@using System.Text
@using System.Text.Encodings.Web
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.WebUtilities
@using LMS.Blazor.Data

@inject UserManager<ApplicationUser> UserManager
@inject IUserStore<ApplicationUser> UserStore
@inject SignInManager<ApplicationUser> SignInManager
@inject IEmailSender<ApplicationUser> EmailSender
@inject ILogger<Register> Logger
@inject NavigationManager NavigationManager
@inject IdentityRedirectManager RedirectManager

<PageTitle>Register</PageTitle>


<style>
    :root {
        --lms-primary: #004651;
        --lms-border: #D9D9D9;
        --lms-input-text: #5B7480;
        --lms-link: #004651;
    }

    .font-inter {
        font-family: 'Inter', sans-serif;
    }

    .font-instrument {
        font-family: 'Instrument Sans', sans-serif;
    }

    .register-card {
        width: 422px;
        background: #FFFFFF;
        border: 1px solid var(--lms-border);
        border-radius: 8px;
        padding: 46px 40px;
    }
</style>

<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="register-card shadow">
        <h1 class="font-inter fw-bold mb-1" style="font-size:40px;color:var(--lms-primary);">LEXICON</h1>
        <h2 class="font-inter fw-bold mb-2" style="font-size:36px;color:var(--lms-primary);">Registrera dig</h2>
        <p class="font-inter fw-semibold mb-4" style="font-size:20px;color:#124342;">Välkommen till Lexicon LMS</p>

        

        <EditForm Model="Input"
                  OnValidSubmit="RegisterUser"
                  FormName="RegisterForm">
            <DataAnnotationsValidator />
            <ValidationSummary class="text-danger" role="alert" />

            <!-- User Name -->
            <div class="mb-3">
                <label class="visually-hidden">User Name</label>
                <InputText @bind-Value="Input.UserName"
                           class="form-control"
                           placeholder="Användarnamn"
                           style="height:61px;font-size:20px;color:var(--lms-input-text);border-color:var(--lms-border);border-radius:8px;" />
                <ValidationMessage For="() => Input.UserName" class="text-danger" />
            </div>

            <!-- E-post -->
            <div class="mb-3">
                <label class="visually-hidden">E-post</label>
                <InputText @bind-Value="Input.Email"
                           class="form-control"
                           placeholder="E-post"
                           style="height:61px;font-size:20px;color:var(--lms-input-text);border-color:var(--lms-border);border-radius:8px;" />
                <ValidationMessage For="() => Input.Email" class="text-danger" />
            </div>

            <!-- Lösenord -->
            <div class="mb-3">
                <label class="visually-hidden">Lösenord</label>
                <InputText type="password"
                           @bind-Value="Input.Password"
                           class="form-control"
                           placeholder="Lösenord"
                           style="height:59px;font-size:20px;color:var(--lms-input-text);border-color:var(--lms-border);border-radius:8px;" />
                <ValidationMessage For="() => Input.Password" class="text-danger" />
            </div>

            <!-- Lösenordsbekräftelse -->
            <div class="mb-3">
                <label class="visually-hidden">Lösenordsbekräftelse</label>
                <InputText type="password"
                           @bind-Value="Input.ConfirmPassword"
                           class="form-control"
                           placeholder="Lösenordsbekräftelse"
                           style="height:59px;font-size:20px;color:var(--lms-input-text);border-color:var(--lms-border);border-radius:8px;" />
                <ValidationMessage For="() => Input.ConfirmPassword" class="text-danger" />
            </div>

            <!-- Submit button -->
            <button type="submit"
                    class="btn w-100 text-white fw-bold font-inter"
                    style="height:58px;font-size:24px;background:var(--lms-primary);border-color:var(--lms-primary);border-radius:8px;">
                Registrera
            </button>
        </EditForm>

        <div class="text-center mt-3">
            <small class="font-instrument" style="font-size:18px;color:#212529;">
                Har du redan ett konto?
                <a href="/Login"
                   class="link-primary font-instrument"
                   style="font-size:18px;color:var(--lms-link);text-decoration:none;">
                    Logga in
                </a>
            </small>
        </div>
    </div>
</div>


