@page "/manage-courses"
@using LMS.Shared.DTOs.EntitiesDtos
@using LMS.Shared.DTOs.EntitiesDtos.ModulesDtos
@using LMS.Shared.DTOs.EntitiesDtos.ProjActivity
@using LMS.Blazor.Client.Services
<!-- Active Course -->
<div class="accordion mb-4" id="teacherToolsAccordion">
    <!-- Manage Users -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingUsers">
            <button class="accordion-button collapsed" type="button"
                    data-bs-toggle="collapse" data-bs-target="#collapseUsers"
                    aria-expanded="false" aria-controls="collapseUsers">
                <i class="bi bi-people me-2"></i> Hantera användare
            </button>
        </h2>
        <div id="collapseUsers" class="accordion-collapse collapse"
             aria-labelledby="headingUsers" data-bs-parent="#teacherToolsAccordion">
            <div class="accordion-body">
                <ManageUsers />
            </div>
        </div>
    </div>

    <!-- Manage Modules -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingModules">
            <button class="accordion-button collapsed" type="button"
                    data-bs-toggle="collapse" data-bs-target="#collapseModules"
                    aria-expanded="false" aria-controls="collapseModules">
                <i class="bi bi-journal-text me-2"></i> Hantera moduler
            </button>
        </h2>
        <div id="collapseModules" class="accordion-collapse collapse"
             aria-labelledby="headingModules" data-bs-parent="#teacherToolsAccordion">
            <div class="accordion-body">
                <ManageModules SelectedModule="selectedModuleToEdit" />
            </div>
        </div>
    </div>
</div>
@if (selectedCourse != null)
{
    <div class="active-course mb-4">
        @if (courses != null && courses.Any())
        {
            <NavStrip Items="courses"
                      ActiveItem="selectedCourse"
                      OnItemSelected="OnCourseSelected"
                      OnAddCourse="AddCourseAsync"
                      OnDeleteCourse="DeleteCourseAsync"
                      OnSaveCourse="SaveCourseAsync" 
                      IsTeacher="IsTeacher"
                      Id="courseNav" />
        }

        <!-- Modules viewer -->
        <ModuleStrip Modules="selectedCourse.Modules"
                     CourseId="selectedCourse.Id"
                     Id="moduleViewer"
                     IsTeacher="IsTeacher"
                     OnEditModuleRequested="HandleEditModule" />

        <!-- Course navigation -->
    </div>
}